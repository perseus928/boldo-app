var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard");Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends"));var _objectWithoutProperties2=_interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties"));var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _react=_interopRequireWildcard(require("react"));var _reactNative=require("react-native");var _reactNativeSvg=_interopRequireWildcard(require("react-native-svg"));var _ButtonTabItem=_interopRequireDefault(require("./item/ButtonTabItem"));var _Dot=_interopRequireDefault(require("./item/Dot"));var _reactNativeSafeAreaContext=require("react-native-safe-area-context");var _reactNativeReanimated=_interopRequireWildcard(require("react-native-reanimated"));var _reactNativeRedash=require("react-native-redash");var _reactFastCompare=_interopRequireDefault(require("react-fast-compare"));var _style=require("./style");var _constant=require("./constant");var _this=this,_jsxFileName="/Users/hongngoc/Desktop/curved-bottom-navigation-bar/src/curved/CurvedTabBar.tsx";var AnimatedSvg=_reactNativeReanimated.default.createAnimatedComponent(_reactNativeSvg.default);var CurvedTabBarComponent=function CurvedTabBarComponent(props){var routes=props.routes,selectedIndex=props.selectedIndex,SIZE_DOT=props.dotSize,TAB_BAR_HEIGHT=props.barHeight,duration=props.duration,dotColor=props.dotColor,tabBarColor=props.tabBarColor;var _useState=(0,_react.useState)(_reactNative.Dimensions.get('window').width),_useState2=(0,_slicedToArray2.default)(_useState,2),width=_useState2[0],setWidth=_useState2[1];var safeArea=(0,_reactNativeSafeAreaContext.useSafeArea)();var _useClocks=(0,_reactNativeRedash.useClocks)(1),_useClocks2=(0,_slicedToArray2.default)(_useClocks,1),clock=_useClocks2[0];var widthTab=(0,_react.useMemo)(function(){return width/routes.length;},[routes,width]);var _useValues=(0,_reactNativeRedash.useValues)(0),_useValues2=(0,_slicedToArray2.default)(_useValues,1),indexAnimated=_useValues2[0];var progress=(0,_reactNativeRedash.withTimingTransition)((0,_reactNativeReanimated.eq)(selectedIndex,indexAnimated),{duration:150});var d=(0,_react.useMemo)(function(){return"M0,0 L".concat(width+widthTab/2-SIZE_DOT,",0\n    C").concat(width+widthTab/2-SIZE_DOT*0.5,",0 ").concat(width+widthTab/2-SIZE_DOT*0.75,",").concat(_constant.HEIGHT_HOLE," ").concat(width+widthTab/2,",").concat(_constant.HEIGHT_HOLE," \n    C").concat(width+widthTab/2+SIZE_DOT*0.75,",").concat(_constant.HEIGHT_HOLE," ").concat(width+widthTab/2+SIZE_DOT*0.5,",0 ").concat(width+widthTab/2+SIZE_DOT," 0 \n    L").concat(width*2,",0 L ").concat(width*2,",").concat(TAB_BAR_HEIGHT," L 0,").concat(TAB_BAR_HEIGHT," Z\n    ");},[width,SIZE_DOT,TAB_BAR_HEIGHT,routes,safeArea]);var containerStyle=(0,_react.useMemo)(function(){return[_style.styles.container,{height:TAB_BAR_HEIGHT,bottom:safeArea.bottom}];},[safeArea]);var svgStyle=[_style.styles.svg,{top:0,height:TAB_BAR_HEIGHT,transform:[{translateX:(0,_reactNativeReanimated.interpolate)(indexAnimated,{inputRange:routes.map(function(item,index){return index;}),outputRange:routes.map(function(item,index){return-((index+1)*width/routes.length);}).reverse()})}]}];var rowTab=(0,_react.useMemo)(function(){return[_style.styles.rowTab,{bottom:safeArea.bottom,width:width,height:TAB_BAR_HEIGHT}];},[safeArea,TAB_BAR_HEIGHT,width]);var bottomView=(0,_react.useMemo)(function(){return[_style.styles.bottomView,{height:safeArea.bottom,width:width,backgroundColor:tabBarColor}];},[safeArea,width,tabBarColor]);(0,_reactNativeReanimated.useCode)(function(){return(0,_reactNativeReanimated.cond)((0,_reactNativeReanimated.not)((0,_reactNativeReanimated.eq)(indexAnimated,selectedIndex)),(0,_reactNativeReanimated.set)(indexAnimated,(0,_reactNativeRedash.timing)({to:selectedIndex,clock:clock,from:indexAnimated,duration:duration})));},[selectedIndex]);(0,_react.useEffect)(function(){var handler=function handler(){setWidth(_reactNative.Dimensions.get('window').width);};_reactNative.Dimensions.addEventListener('change',handler);return function(){_reactNative.Dimensions.removeEventListener('change',handler);};},[]);return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_reactNative.View,{style:containerStyle,__self:_this,__source:{fileName:_jsxFileName,lineNumber:98,columnNumber:13}},_react.default.createElement(AnimatedSvg,{width:width*2,height:TAB_BAR_HEIGHT,style:svgStyle,__self:_this,__source:{fileName:_jsxFileName,lineNumber:99,columnNumber:17}},_react.default.createElement(_reactNativeSvg.Path,{d:"".concat(d),fill:tabBarColor,stroke:'transparent',strokeWidth:1,__self:_this,__source:{fileName:_jsxFileName,lineNumber:100,columnNumber:21}}))),_react.default.createElement(_reactNative.View,{style:rowTab,__self:_this,__source:{fileName:_jsxFileName,lineNumber:103,columnNumber:13}},_react.default.createElement(_Dot.default,{dotColor:dotColor,dotSize:SIZE_DOT,barHeight:TAB_BAR_HEIGHT,width:width,selectedIndex:indexAnimated,routes:routes,progress:progress,__self:_this,__source:{fileName:_jsxFileName,lineNumber:104,columnNumber:17}}),routes.map(function(_ref,index){var key=_ref.key,configs=(0,_objectWithoutProperties2.default)(_ref,["key"]);return _react.default.createElement(_ButtonTabItem.default,(0,_extends2.default)({width:width,key:key,clock:clock,indexAnimated:indexAnimated,countTab:routes.length,selectedIndex:selectedIndex,index:index},configs,{__self:_this,__source:{fileName:_jsxFileName,lineNumber:106,columnNumber:28}}));})),_react.default.createElement(_reactNative.View,{style:bottomView,__self:_this,__source:{fileName:_jsxFileName,lineNumber:117,columnNumber:13}}));};var CurvedTabBar=(0,_react.memo)(CurvedTabBarComponent,function(prevProps,nextProps){return(0,_reactFastCompare.default)(prevProps,nextProps);});var _default=CurvedTabBar;exports.default=_default;
//# sourceMappingURL=CurvedTabBar.js.map